[tox]
envlist = py36, py37, py37mpi, doctest

[testenv:doctest]
changedir = doc
deps = numpy
       tinydb
       tqdm
       click
       pytest
commands =
    python doctest_rsts.py -1 -f "cookbook/*.rst"
    python doctest_rsts.py -1 -f "examples/*.rst"

[testenv:py37]
changedir = tests
basepython = python3.7
deps = numpy
       tinydb
       tqdm
       click
       pytest
commands =
    pytest --ignore=test_mpi.py

[testenv:py37mpi]
changedir = tests
basepython = python3.7
deps = numpy
       tinydb
       tqdm
       click
       pytest
commands =
    mpiexec -n 1 pytest test_mpi.py

[testenv:py36]
changedir = tests
basepython = python3.6
deps = numpy
       tinydb
       tqdm
       click
       pytest
commands =
    pytest --ignore=test_mpi.py
